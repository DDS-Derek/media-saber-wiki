---
title: 订阅MP共享识别词
article: false
tags: 
  - 修仙秘籍
  - MP
  - 识别词
  - 订阅
categories: 
editor: markdown
permalink: /docs/cultivation_secrets/subscribe_mp_words/
date: 2023-09-27 12:16:17
---

# 📝 订阅MP共享识别词

**订阅MP共享识别词** 是一个通过网络下载MP共享识别词文件并自动导入到本地识别词库的插件。支持定时同步多个远程识别词源，提升媒体文件的识别准确性。

## ⚙️ 功能特点

### 📚 远程订阅
- **多源支持**：支持同时订阅多个远程识别词文件
- **自动下载**：定时从远程URL下载最新识别词
- **格式验证**：自动验证下载文件的格式和内容
- **安全检查**：过滤HTML内容，仅处理纯文本识别词

### 🔄 数据管理
- **定时更新**：支持Cron表达式定时自动更新
- **完整替换**：每次更新完全替换订阅的识别词数据
- **数据清理**：支持一键删除所有订阅的识别词数据
- **智能解析**：自动解析MP识别词格式并导入

## 🚀 配置指南

### 基础配置

插件配置包含以下参数：

### 📋 必填参数

1. **下载链接 (urls)**：
   - 远程识别词文件的下载地址
   - 支持多个链接，每行一个
   - 必须是以`.txt`结尾的文本文件

### ⚙️ 可选参数

1. **周期 (cron)**：
   - 定时下载的Cron表达式
   - 默认：`0 * * * *`（每小时执行一次）
   - 留空则仅支持手动执行

## 📖 使用说明

### 下载链接配置

#### URL格式要求
- **协议支持**：仅支持`http://`和`https://`协议
- **文件格式**：必须以`.txt`结尾的纯文本文件
- **文件大小**：限制在1MB以内
- **内容类型**：必须是纯文本，不能是HTML页面

#### 配置示例(以下只是参考格式，不是真实的URL)
```
https://raw.githubusercontent.com/user/repo/main/movie_words.txt
https://example.com/tv_words.txt
https://cdn.example.org/anime_words.txt
```

### 执行流程

1. **文件下载**：
   - 逐个访问配置的下载链接
   - 验证URL格式和文件类型
   - 下载文件内容并检查大小限制

2. **内容验证**：
   - 检查文件是否为纯文本格式
   - 过滤HTML内容和无效数据
   - 验证识别词格式的正确性

3. **数据导入**：
   - 解析MP识别词格式
   - 删除旧的订阅识别词数据
   - 导入新的识别词到本地库

4. **结果通知**：
   - 发送执行结果通知
   - 显示成功导入的识别词组数量

### 定时任务配置

#### Cron表达式示例

```bash
# 每小时执行一次
0 * * * *

# 每天凌晨2点执行
0 2 * * *

# 每周日凌晨3点执行
0 3 * * 0

# 每月1日凌晨4点执行
0 4 1 * *
```

> 📖 **详细说明**：关于Cron表达式的完整语法和更多示例，请参考：[Cron表达式说明文档](/docs/other/cron_rule)

### 操作功能

#### 运行一次
- 立即执行一次识别词下载和导入
- 不受定时任务设置影响
- 可用于测试配置或手动更新

#### 删除数据
- 删除所有通过订阅导入的识别词
- 不影响手动添加的本地识别词
- 操作不可逆，请谨慎使用

## ⚠️ 注意事项

### 使用前提

1. **网络要求**：
   - Media Saber能正常访问互联网
   - 目标服务器稳定可访问
   - 网络连接超时设置为30秒

2. **文件要求**：
   - 识别词文件必须是纯文本格式
   - 文件大小不能超过1MB
   - 文件扩展名必须是`.txt`

### 重要提醒

1. **URL正确性**：
   - 确保使用正确的原始文件地址
   - GitHub文件要使用包含`raw`的地址
   - 避免使用页面地址或重定向链接

2. **数据安全**：
   - 订阅操作会完全替换原有数据
   - 建议在首次使用前备份重要的本地识别词
   - 删除数据操作不可逆

3. **更新频率**：
   - 不建议设置过于频繁的更新周期
   - 考虑远程服务器的负载和限制
   - 建议每日或每周更新一次

### 故障排除

1. **下载失败**：
   - 检查URL地址是否正确
   - 确认网络连接正常
   - 验证目标服务器是否可访问

2. **格式错误**：
   - 确保文件是纯文本格式
   - 检查文件扩展名是否为`.txt`
   - 避免下载HTML页面内容

3. **导入失败**：
   - 检查识别词文件格式是否正确
   - 确认文件内容符合MP识别词标准
   - 查看错误日志获取详细信息

## 📊 使用效果

### 操作统计
- **下载成功数**：成功下载的识别词文件数量
- **导入识别词组数**：实际导入的识别词组数量
- **处理耗时**：完整执行流程的时间消耗

### 数据管理
- **订阅数据类型**：标记为"订阅"类型的识别词
- **自动替换机制**：每次更新完全替换订阅数据
- **本地数据保护**：不影响手动添加的识别词

## 🔗 相关链接

- [修仙秘籍主页](/docs/cultivation_secrets/main/)
- [Cron表达式说明](/docs/other/cron_rule)
- [豆瓣榜单订阅](/docs/cultivation_secrets/douban_subject_subscribe/)

---

🎯 **提示**：使用GitHub等平台的识别词文件时，确保使用原始文件地址（包含raw的链接）而不是页面地址。
