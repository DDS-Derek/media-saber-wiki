---
title: DC 助手
article: false
tags: 
  - 修仙秘籍
  - Docker
  - 容器管理
  - 自动化
categories: 
editor: markdown
permalink: /docs/cultivation_secrets/dc_helper/
date: 2023-09-27 12:16:17
---

# 🐳 DC 助手

**DC 助手** 是一个强大的Docker容器管理插件，需要配合[dockerCopilot 项目](https://github.com/onlyLTY/dockerCopilot)使用。它可以实现Docker镜像的自动检查、更新通知、自动备份和镜像清理等功能。

## ⚙️ 功能特点

### 🔄 容器管理
- **镜像更新检查**：自动检查Docker镜像是否有新版本
- **更新通知**：发现新版本时自动发送通知
- **自动更新**：可配置自动更新指定容器
- **备份功能**：更新前自动备份容器配置

### 🧹 系统维护
- **镜像清理**：自动清理无用的Docker镜像
- **容器监控**：监控容器运行状态
- **定时任务**：支持定时执行检查和清理任务
- **Compose备份**：备份Docker Compose配置文件

## 🚀 前置要求

### dockerCopilot 项目部署

使用DC助手前，需要先部署dockerCopilot项目：

1. **获取项目**：
   ```bash
   git clone https://github.com/onlyLTY/dockerCopilot.git
   ```

2. **部署方式**：
   - 可以使用Docker部署
   - 也可以直接运行Python程序
   - 详细部署方法请参考项目文档

3. **网络配置**：
   - 确保Media Saber能够访问dockerCopilot服务
   - 记录dockerCopilot的访问地址和端口

## 📖 配置指南

### 📋 基础配置

#### 必填参数

1. **主机地址 (host)**：
   - dockerCopilot服务的完整地址
   - 格式：`http://IP地址:端口`
   - 示例：`http://192.168.1.100:8080`

2. **密码 (password)**：
   - dockerCopilot服务的访问密码
   - 在dockerCopilot部署时设置的密码
   - 用于API访问验证

#### 定时任务配置

3. **检查周期 (checkCron)**：
   - 设置自动检查镜像更新的频率
   - 使用Cron表达式格式
   - 示例：`0 */6 * * *` 每6小时检查一次

4. **备份周期 (backupCron)**：
   - 设置自动备份的执行频率
   - 使用Cron表达式格式
   - 示例：`0 2 * * 0` 每周日凌晨2点备份

#### 容器选择

5. **监控容器 (containers)**：
   - 选择需要监控和管理的Docker容器
   - 支持多选
   - 可以从正在运行的容器列表中选择

### 🔧 操作功能

#### 手动操作

1. **检查更新**：
   - 手动触发一次镜像更新检查
   - 查看所有容器的更新状态
   - 获取最新的镜像版本信息

2. **备份Compose**：
   - 手动备份Docker Compose配置文件
   - 保存当前容器配置状态
   - 便于出现问题时快速恢复

## 📖 使用说明

### 配置流程

#### 第一步：部署dockerCopilot

1. **选择部署方式**：
   - Docker部署（推荐）
   - 源码部署

2. **配置访问权限**：
   - 设置访问密码
   - 配置网络端口
   - 确保服务正常启动

3. **测试连接**：
   - 访问dockerCopilot Web界面
   - 确认服务运行正常

#### 第二步：配置DC助手

1. **填写连接信息**：
   - 输入dockerCopilot的完整地址
   - 填入正确的访问密码

2. **选择监控容器**：
   - 点击容器选择器
   - 从列表中选择需要监控的容器
   - 确认容器信息正确

3. **设置定时任务**：
   - 配置检查更新的频率
   - 设置自动备份的时间
   - 根据需求调整执行周期

#### 第三步：测试功能

1. **手动检查**：
   - 点击"检查"按钮测试连接
   - 确认可以正常获取容器信息

2. **备份测试**：
   - 执行一次手动备份
   - 确认备份功能正常工作

### 定时任务配置

#### Cron表达式示例

```bash
# 每6小时检查一次更新
0 */6 * * *

# 每天凌晨2点检查
0 2 * * *

# 每周一上午8点检查
0 8 * * 1

# 每月1日凌晨3点备份
0 3 1 * *
```

> 📖 **详细说明**：关于Cron表达式的完整语法和更多示例，请参考：[Cron表达式说明文档](/docs/other/cron_rule)

### 容器管理

#### 支持的操作

1. **镜像检查**：
   - 检查指定容器的镜像版本
   - 对比本地版本与远程最新版本
   - 识别需要更新的容器

2. **自动更新**：
   - 根据配置自动更新容器
   - 更新前自动备份配置
   - 保持容器运行状态

3. **备份管理**：
   - 备份Docker Compose文件
   - 保存容器配置信息
   - 支持版本化备份

## ⚠️ 注意事项

### 重要提醒

1. **依赖关系**：
   - **必须先部署dockerCopilot项目**
   - DC助手只是前端界面，实际功能由dockerCopilot提供
   - 确保两个服务之间网络连通

2. **系统兼容性**：
   - 检查Docker版本兼容性
   - 确认操作系统支持情况
   - 验证网络环境配置

3. **权限要求**：
   - dockerCopilot需要Docker管理权限
   - 确保服务有足够的文件访问权限
   - 检查防火墙和安全组设置

### 使用建议

1. **备份策略**：
   - 定期备份重要容器配置
   - 在更新前手动创建备份点
   - 保留多个历史备份版本

2. **监控选择**：
   - 优先监控关键业务容器
   - 避免监控过多容器影响性能
   - 根据重要性设置不同的检查频率

3. **更新策略**：
   - 测试环境先验证更新
   - 关键服务谨慎设置自动更新
   - 制定回滚预案

### 故障排除

1. **连接失败**：
   - 检查dockerCopilot服务状态
   - 确认网络连通性
   - 验证地址和端口配置

2. **认证失败**：
   - 检查密码是否正确
   - 确认dockerCopilot访问权限
   - 重新设置访问凭据

3. **容器检查失败**：
   - 确认Docker服务正常
   - 检查容器运行状态
   - 验证权限配置

4. **备份失败**：
   - 检查磁盘空间
   - 确认文件访问权限
   - 查看详细错误日志

## 📊 使用效果

### 自动化管理
- **版本跟踪**：实时跟踪容器镜像版本
- **更新提醒**：及时发现可用更新
- **配置备份**：保障配置文件安全
- **系统清理**：自动清理无用镜像

### 运维效率
- **批量管理**：统一管理多个容器
- **定时执行**：无需手动干预
- **状态监控**：实时了解容器状态
- **一键操作**：简化管理流程

## 🔗 相关链接

- [修仙秘籍主页](/docs/cultivation_secrets/main/)
- [dockerCopilot 项目](https://github.com/onlyLTY/dockerCopilot)
- [Cron表达式说明](/docs/other/cron_rule)

---

🎯 **提示**：DC助手需要配合dockerCopilot项目使用，请确保先正确部署dockerCopilot服务。

:::note 致谢
感谢`@onlyLTY` 大佬提供的dockerCopilot项目，以及为大家带来本插件的开发者。
:::
