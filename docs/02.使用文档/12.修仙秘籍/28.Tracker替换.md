---
title: Tracker替换
article: false
tags: 
  - 修仙秘籍
  - Tracker
  - 种子
  - 替换
categories: 
editor: markdown
permalink: /docs/cultivation_secrets/tracker_editor/
date: 2023-09-27 12:16:17
---

# 🔄 Tracker替换

**Tracker替换** 是一个对下载器中所有种子的Tracker进行字符串替换的插件，支持批量替换和可选的周期性巡检功能，帮助修复失效Tracker或迁移到新的Tracker地址。

## ⚙️ 功能特点

### 🎯 字符串替换
- **精确替换**：基于字符串匹配进行Tracker替换
- **批量处理**：一次性处理下载器中的所有种子
- **规则配置**：支持多条替换规则同时生效
- **即时生效**：替换后立即在下载器中生效

### 📊 可选巡检
- **周期执行**：可设置定时巡检（不推荐）
- **消息推送**：支持替换结果通知
- **操作日志**：记录详细的替换过程

## 🚀 配置指南

### 基础配置

插件配置包含以下参数：

### 📋 必填参数

1. **下载器 (downloaderId)**：
   - 选择要处理的下载器
   - 支持qBittorrent和Transmission

2. **Tracker替换配置 (trackerConfig)**：
   - 每一行一个替换规则
   - 格式：`待替换文本|替换的文本`
   - 支持多条规则

### ⚙️ 可选参数

1. **周期执行 (cron)**：
   - **不推荐使用**：会增加下载器负载
   - Cron表达式，留空则禁用周期执行
   - 示例：`* * * * *`（每分钟执行一次）

2. **消息推送 (notice)**：
   - 开启后将替换结果进行消息推送
   - 默认关闭

## 📖 使用说明

### 替换规则配置

#### 配置格式
每行一个替换规则，使用`|`分隔待替换文本和替换文本：
```
待替换文本|替换的文本
```

#### 配置示例

**域名替换**：
```
baidu.com|qq.com
https://baidu.com|https://qq.com
```

**完整地址替换**：
```
https://old-tracker.com:8080/announce|https://new-tracker.com:443/announce
tracker.oldsite.com|tracker.newsite.org
```

**端口修改**：
```
:8080/|:443/
http://tracker.site.com|https://tracker.site.com
```

#### 替换逻辑

**字符串替换**：使用标准的字符串`replace`操作
- 原Tracker：`https://baidu.com/announce.php?passkey=xxxx`
- 待替换：`baidu.com`
- 替换文本：`qq.com`
- 结果：`https://qq.com/announce.php?passkey=xxxx`

**完整示例**：
- 原Tracker：`https://baidu.com/announce.php?passkey=xxxx`
- 待替换：`https://baidu.com`
- 替换文本：`https://qq.com`
- 结果：`https://qq.com/announce.php?passkey=xxxx`

### 执行流程

1. **连接下载器**：
   - 连接到指定的下载器
   - 获取所有种子的Tracker信息

2. **应用替换规则**：
   - 逐条应用配置的替换规则
   - 对每个种子的每个Tracker进行字符串替换

3. **更新Tracker**：
   - 将替换后的Tracker更新到下载器
   - 记录替换操作结果

4. **结果通知**：
   - 统计替换结果
   - 发送通知（如开启）

### 周期执行配置

#### ⚠️ 重要提醒
- **不推荐开启周期巡检**
- 会增加下载器的负载
- 可能影响下载器性能

#### Cron表达式示例（仅供参考）
```bash
# 每分钟执行一次（极不推荐）
* * * * *

# 每小时执行一次（不推荐）
0 * * * *

# 每天执行一次（谨慎使用）
0 2 * * *
```

> 📖 **详细说明**：关于Cron表达式的完整语法和更多示例，请参考：[Cron表达式说明文档](/docs/other/cron_rule)

### 操作功能

#### 运行一次
- 立即执行一次Tracker替换
- **强烈建议先保存配置后再运行**
- 不受周期执行设置影响

## ⚠️ 注意事项

### 使用建议

1. **测试验证**：
   - **强烈建议**先添加一个测试种子验证替换效果
   - 确认程序是否正常运行
   - 验证替换规则是否符合预期

2. **配置保存**：
   - 请先确认保存配置，再点击"运行一次"
   - 配置变更后需要重新保存

3. **规则设计**：
   - 替换规则要尽可能精确
   - 避免过于宽泛的匹配模式
   - 考虑可能的副作用

### 重要提醒

1. **操作不可逆**：
   - Tracker替换操作无法撤销
   - 建议事先备份重要种子信息
   - 谨慎设置替换规则

2. **下载器负载**：
   - 大量种子替换可能影响下载器性能
   - 避免在下载器繁忙时执行
   - **不建议开启周期执行**

3. **网络影响**：
   - 替换后的Tracker需要能正常访问
   - 确认新Tracker地址的有效性
   - 考虑网络环境对访问的影响

### 故障排除

1. **替换不生效**：
   - 确认已保存配置后再运行
   - 检查替换规则格式是否正确
   - 验证下载器连接状态

2. **规则匹配问题**：
   - 检查待替换文本是否完全匹配
   - 注意大小写敏感性
   - 确认特殊字符的处理

3. **性能问题**：
   - 暂停周期执行功能
   - 减少同时处理的种子数量
   - 选择下载器空闲时执行

## 📊 使用效果

### 操作统计
- **处理种子数**：检查的种子总数
- **替换成功数**：成功替换的Tracker数量
- **替换规则数**：应用的替换规则数量
- **执行耗时**：完整替换过程的时间

### 实际效果
- **Tracker更新**：失效Tracker得到修复
- **连接改善**：种子连接状态提升
- **维护简化**：批量维护Tracker地址

## 🔗 相关链接

- [修仙秘籍主页](/docs/cultivation_secrets/main/)
- [Cron表达式说明](/docs/other/cron_rule)
- [下载器站点标签](/docs/cultivation_secrets/downloader_site_tag/)
- [自动删种](/docs/cultivation_secrets/auto_delete_torrent/)

---

🎯 **提示**：使用前请先用单个种子测试替换规则，确认效果正确后再批量执行。不建议开启周期执行以避免影响下载器性能。
