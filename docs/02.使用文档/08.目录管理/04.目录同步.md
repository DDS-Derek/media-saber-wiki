---
title: 目录同步
article: false
tags: 
  - 目录同步
  - 文件同步
  - 自动整理
categories: 
editor: markdown
permalink: /docs/directory_management/directory_sync/
date: 2023-09-27 12:16:17
---

# 🔄 目录同步

## 📋 同步任务列表

目录同步页面展示了所有已配置的目录同步任务，以可折叠面板形式展示每个同步任务的详细信息。

### 🎯 功能操作

- 🔄 **刷新**：点击刷新按钮重新加载同步任务列表
- ➕ **新增**：点击新增按钮创建新的同步任务
- ✈️ **立即运行**：点击飞机按钮立即执行同步任务
- ✏️ **编辑**：点击编辑按钮修改同步任务配置
- 🗑️ **删除**：点击删除按钮移除同步任务
- 🔼 **展开/收缩面板**：展开或收缩任务详情面板

### 📊 同步任务信息显示

每个同步任务面板会显示以下信息：

- 📝 **任务名称**：自定义的同步任务名称
- ✅ **状态**：显示任务是否已启用
- 🔁 **识别重命名**：是否对文件进行识别和重命名
- 🎞️ **刮削**：是否对媒体文件进行刮削
- 📺 **刷新媒体库**：是否在同步完成后刷新媒体库
- 📄 **仅媒体文件**：是否只处理媒体文件
- ❓ **媒体库缺失**：是否处理媒体库缺失的文件
- 📂 **同步方式**：文件同步的方式
- 📁 **源目录路径**：需要同步的源目录路径
- 📁 **目标目录标签/路径**：同步目标目录的标签或路径
- 📁 **未知目录**：无法识别文件的存放目录

---

## ⚙️ 工作原理

### 📊 监控机制

- 对源目录进行监控，当目录下的文件发生新增时进行转移处理
- 按设置的转移方式整理至目的目录或媒体库目录
- 目录监控对环境有要求，部分场景下无法实现监控，参考 [目录同步不自动运行](/guide/start/problem/#目录同步不自动运行)

---

## ➕ 新增/编辑同步任务

创建或修改目录同步任务需要配置以下字段：

### 📝 基本信息

- **名称**：自定义同步任务名称，便于识别和管理
- **启用**：控制同步任务是否启用，关闭后不会自动执行

### 📂 目录配置

- **源目录**：需要同步的源目录路径，源目录必须配置
- **目标目录**：
  - 可选择目标目录标签，系统会自动识别分类并转移到对应标签的媒体库目录
  - 或直接指定目标目录路径
  - 目标目录未配置时将自动识别分类并转移到`媒体库目录`（此时显示为`自动`）
- **未知目录**：无法识别时转移的目录
  - 未配置时，无法识别的文件不会被处理
  - 未识别目录下产生的文件程序**不会主动清理**，建议不配置，未识别记录可在手动识别功能下处理

### ⚙️ 处理选项

- **识别并重命名**：
  - `开启`后会对原文件进行识别并按定义的重命名格式进行重命名
  - `关闭`后只转移文件不识别和重命名，相当于文件同步
- **刮削**：是否对媒体文件进行元数据刮削
- **刷新媒体库**：是否在同步完成后刷新媒体库
- **仅媒体文件**：是否只处理媒体文件（视频、音频等）
- **媒体库缺失**：是否处理媒体库缺失的文件

### 🔄 同步方式

- 参考 [转移方式](/docs/other/glossary/#转移方式)
- 可选择不同的文件处理方式，如移动、复制、硬链接等

### 🛠️ 高级选项

- **兼容模式**：
  - 开启`兼容模式`后，目录同步可以实时监控挂载网盘、跨系统 SMB 共享等场景
  - 但监控性能会降低，会增加对磁盘的访问量
  - 建议在标准模式无法正常工作时启用

---

## 🚀 立即执行

可通过以下方式立即执行同步任务：

1. 点击任务列表中的✈️"立即运行"按钮
2. 任务将立即开始执行同步操作
3. 可在任务详情中查看执行状态

---

## ⚠️ 注意事项

- 源目录必须配置且可访问
- 目标目录可以是标签或具体路径
- 未识别目录下的文件不会被自动清理
- 兼容模式会降低性能但提高兼容性
- 同步任务会根据配置自动执行，也可手动触发
- 刮削操作会覆盖现有元数据文件，请谨慎配置