---
title: 自定义识别词
article: false
tags: null
categories: null
editor: markdown
permalink: /docs/media_organization/custom_identification_words/
date: 2023-09-27 12:16:17
---

# 🔤 自定义识别词

当种子标题名称、文件名称无法识别时，可以通过自定义识别词对原名称进行修改，以符合`搜索订阅`、`刮削`的识别要求。

## 📋 页面功能

**顶部操作区域**

- 🔍 **搜索框**：通过关键词搜索识别词组
- 🔄 **刷新**：重新加载识别词组列表
- ➕ **新增识别词组**：创建新的识别词组
- 🧪 **名称识别测试**：测试识别词效果
- 📂 **更多操作**：
  - 全部展开：展开所有识别词组面板
  - 全部折叠：折叠所有识别词组面板
  - 批量启用：启用选中的识别词组
  - 批量停用：停用选中的识别词组
  - 批量删除：删除选中的识别词组
  - 清空：删除所有识别词组

**识别词组操作**

每个识别词组支持以下操作：

- ➕ **添加识别词**：向词组中添加新的识别词（仅自定义词组）
- 📂 **更多操作**：
  - 删除当前词组（仅自定义词组）
  - 导入识别词（仅自定义词组）
  - 导出识别词（仅自定义词组且有选中项）
  - 批量启用（仅自定义词组且有选中项）
  - 批量停用（仅自定义词组且有选中项）
  - 批量删除（仅自定义词组且有选中项）
- ↕️ **展开/收缩面板**：展开或收缩识别词组详情

## 🧩 识别词类型

### 🚫 屏蔽
将`被替换词`从待识别文本中去除。

### 🔄 替换
使用`替换词`替换掉待识别文本中的`被替换词`部分。

### ➕ 替换+集偏移
替换的同时，完成集偏移操作。

### 🔢 集偏移
定位待识别文本中的`集数位置`，并对识别出来的集数做运算，以解决识别出来的的集数与 TMDB 实际不一致的问题。`前后定位词`之间的所有数字视为集数。`偏移集数`支持运算，例如集数加 1：`EP+1`；集数翻倍：`2*EP`；集数翻倍-1：`2*EP-1`（`EP`代表原集数）。

> 正则表达式：以上均支持使用正则表达式，使用 Python regex 模块，集偏移必须使用正则表达式。

## 📚 识别词组

识别词组分为系统内置词组和用户自定义词组：

- **系统内置词组**：由系统提供，不可修改或删除
- **自定义词组**：用户创建，可完全自定义管理

对于电视剧或者动漫这种可能所需的识别词比较多的时候，我们可以选择新增识别词组来方便管理和分享。

## 📤 导入导出

通过导入功能可以将别人分享的识别词导入使用。

通过批量管理--导出按钮可以将选中的识别词/识别词组导出为一串长文本，分享给他人使用。

>分享时应填写备注，以便别人导入时能知道是什么。

## 🔘 状态管理

可以通过批量管理--启用、停用按钮更改选中的识别词/识别词组的状态，也可以在每个具体的识别词里更改状态为启用、停用。

## 🧪 使用教程

**1) 新增识别词**

我们进入自定义识别词页面，可以通过搜索框查找识别词组，通过刷新按钮重新加载数据。点击"新增识别词组"按钮可以创建新的识别词组。

**2）识别词组管理**

在每个识别词组中，可以点击"+"按钮添加新的识别词（仅限自定义词组）。通过点击"更多操作"按钮可以：
- 删除当前词组（仅自定义词组）
- 导入识别词（仅自定义词组）
- 导出识别词（仅自定义词组且有选中项）
- 批量启用/停用/删除（仅自定义词组且有选中项）

**3）面板操作**

每个识别词组都可以通过右侧的展开/收缩按钮来控制面板的展开状态，方便查看和管理大量识别词组。

## 📊 识别词字段详解

在每个识别词组的表格中，可以查看该组下的所有识别词，各字段含义如下：

### 🔄 基本字段

- **状态**：识别词的启用状态，绿色为启用，灰色为停用。只有启用的识别词才会在识别过程中生效。
- **被替换词**：需要被替换或屏蔽的文本内容。在"屏蔽"类型中，该文本会被直接移除；在"替换"类型中，该文本会被"替换词"替换。
- **替换词**：用于替换"被替换词"的文本内容。仅在"替换"和"替换+集偏移"类型中使用。
- **前定位词**：用于定位集数的前缀文本。在"集偏移"和"替换+集偏移"类型中使用，与"后定位词"配合确定集数位置。
- **后定位词**：用于定位集数的后缀文本。在"集偏移"和"替换+集偏移"类型中使用，与"前定位词"配合确定集数位置。
- **偏移集数**：对识别出的集数进行运算的表达式。支持如`EP+1`、`2*EP`、`2*EP-1`等形式，其中`EP`代表原始集数。
- **备注**：用户自定义的备注信息，用于说明该识别词的用途或特殊说明。

### ⚙️ 高级字段

- **正则表达式**：开关选项，开启后"被替换词"、"替换词"、"前定位词"、"后定位词"均支持正则表达式语法。特别地，在"集偏移"类型中必须使用正则表达式。
- **操作按钮**：
  - ✏️ **编辑**：修改当前识别词的所有字段信息（仅自定义词组）
  - 🗑️ **删除**：删除当前识别词（仅自定义词组）

## 💡 使用案例

### 刮削海贼王

我们知道海贼王的TMDB里一共分了21季。但是有些时候站点的种子文件名并没有划分到具体的季数，全划分到了第一季。

比如在某站下载的种子文件名称：`One.Piece.S01E1076.1999.1080p.CR.WEB-DL.x264.AAC-ADWeb.mkv`，它会识别成第一季，这对刮削很不友好。

下面我们来编辑个自定义识别词。

- 类型：`替换`
- 被替换词：`One.Piece.S01E(89[2-9]|(9|10)\d{2}).1999`
- 替换词：`海贼王.S21E\1.1999`

说明：
- 被替换词里的【(89[2-9]|(9|10)\d{2})】代表了892-1099集。 其中：
    - `89[2-9]`匹配的是以 "89" 开头，后跟一个在 2-9 之间的数字的字符串。这里也就是说匹配892-899集。
    - `(9|10)\d{2}`里的(9|10)是一个选择性的正则表达式，它会匹配以 9 开头的数字或以 10 开头的数字，\d{2}是说匹配任何一个两位数字的字符串。【(9|10)\d{2}】就是匹配900-1099集。

- 替换词里的`\1`是指的是被替换词里的`(89[2-9]|(9|10)\d{2})`。

重新识别，成功的识别成了第21季。

## 💡 使用建议

1. **合理分组**：对于特定的电视剧或动漫，建议创建专门的识别词组，便于管理和维护。

2. **精确匹配**：编写识别词时尽量使用精确的匹配规则，避免影响其他不相关的文件名。

3. **定期维护**：定期检查识别词的效果，删除不再需要的识别词，保持识别词库的整洁。

4. **测试验证**：使用[名称识别测试](/docs/media_organization/name_recognition_test/)功能验证识别词的效果，确保按预期工作。

5. **备份分享**：重要的识别词可以通过导出功能进行备份，也可以分享给其他用户使用。